"use strict";(globalThis.webpackChunkdocs_headvroom_com=globalThis.webpackChunkdocs_headvroom_com||[]).push([[875],{1461:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>p,frontMatter:()=>a,metadata:()=>o,toc:()=>u});const o=JSON.parse('{"id":"features/integrations/google-drive","title":"Google Drive Integration","description":"Connect your Google Drive folders to Headvroom nodes.","source":"@site/docs/features/integrations/google-drive.md","sourceDirName":"features/integrations","slug":"/features/integrations/google-drive","permalink":"/features/integrations/google-drive","draft":false,"unlisted":false,"editUrl":"https://github.com/chrisberno/headvroom/tree/main/docs/docs.headvroom.com/docs/features/integrations/google-drive.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_label":"Google Drive","sidebar_position":1},"sidebar":"docsSidebar","previous":{"title":"Links","permalink":"/features/links"},"next":{"title":"Media Images","permalink":"/features/integrations/media-images"}}');var s=r(4848),t=r(8453),i=r(1470),l=r(9365);const a={sidebar_label:"Google Drive",sidebar_position:1},d="Google Drive Integration",c={},u=[{value:"For Users",id:"for-users",level:2},{value:"How It Works",id:"how-it-works",level:3},{value:"What You Can Do",id:"what-you-can-do",level:3},{value:"Requirements",id:"requirements",level:3},{value:"Google Workspace Users",id:"google-workspace-users",level:3},{value:"Troubleshooting",id:"troubleshooting",level:3},{value:"For Developers",id:"for-developers",level:2},{value:"Environment Variables",id:"environment-variables",level:3},{value:"Google Cloud Setup",id:"google-cloud-setup",level:3},{value:"Database Migration",id:"database-migration",level:3},{value:"API Routes",id:"api-routes",level:3},{value:"OAuth Flow",id:"oauth-flow",level:3},{value:"Scopes Used",id:"scopes-used",level:3},{value:"Google Workspace Considerations",id:"google-workspace-considerations",level:3},{value:"For Agents",id:"for-agents",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Quickstart Checklist",id:"quickstart-checklist",level:3},{value:"Validation",id:"validation",level:3},{value:"Common Issues",id:"common-issues",level:3},{value:"Google Workspace Quickstart Addendum",id:"google-workspace-quickstart-addendum",level:3},{value:"Workspace Debugging",id:"workspace-debugging",level:3},{value:"Done?",id:"done",level:3}];function h(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"google-drive-integration",children:"Google Drive Integration"})}),"\n",(0,s.jsx)(n.p,{children:"Connect your Google Drive folders to Headvroom nodes."}),"\n","\n",(0,s.jsxs)(i.A,{children:[(0,s.jsxs)(l.A,{value:"users",label:"Users",default:!0,children:[(0,s.jsx)(n.h2,{id:"for-users",children:"For Users"}),(0,s.jsx)(n.p,{children:"Connect your Google Drive to access files directly from your knowledge graph."}),(0,s.jsx)(n.h3,{id:"how-it-works",children:"How It Works"}),(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Click a node"})," to open the InfoPanel"]}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"Scroll to Google Drive section"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:'Click "Connect Google Drive"'})}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Authorize with Google"})," (one-time per session)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Select a folder"})," from the picker"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Folder contents appear"})," in the node"]}),"\n"]}),(0,s.jsx)(n.h3,{id:"what-you-can-do",children:"What You Can Do"}),(0,s.jsx)(n.p,{children:"You can browse files and subfolders, click files to open in Google (Docs, Sheets, etc.), see recent activity in connected folders, and connect different folders to different nodes."}),(0,s.jsx)(n.h3,{id:"requirements",children:"Requirements"}),(0,s.jsx)(n.p,{children:"You need a Google account with Drive access, a Headvroom account, and a modern browser (Chrome, Firefox, Safari, Edge)."}),(0,s.jsx)(n.h3,{id:"google-workspace-users",children:"Google Workspace Users"}),(0,s.jsx)(n.p,{children:"If you're using a Google Workspace account (your company/organization email), you may encounter additional authorization steps."}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:'"Access Blocked" or "403" errors:'})," Your organization's admin may need to approve Headvroom. Contact your IT administrator and ask them to allow Headvroom in the Google Workspace Admin Console."]}),(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"What to tell your admin:"})}),(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:'"I need to use Headvroom\'s Google Drive integration. Can you add it as a trusted app in Admin Console \u2192 Security \u2192 API Controls \u2192 App Access Control? The Client ID is provided by the Headvroom instance administrator."'}),"\n"]}),(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"After admin approval:"})}),(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Disconnect"})," Google Drive in Headvroom (if previously connected)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Reconnect"})," - go through the full OAuth flow again"]}),"\n",(0,s.jsx)(n.li,{children:"This registers the proper scopes with your Workspace"}),"\n"]}),(0,s.jsx)(n.h3,{id:"troubleshooting",children:"Troubleshooting"}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:'"Google Drive not configured"'})," - The administrator hasn't set up Google Cloud credentials yet. Contact your administrator or check the Developers Guide."]}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Authorization fails"})," - Clear browser cache and try again. Ensure pop-ups are allowed for headvroom.com. Try a different browser."]}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Files not showing"})," - Refresh the page. Re-authorize Google Drive. Check folder permissions in Google Drive."]})]}),(0,s.jsxs)(l.A,{value:"developers",label:"Developers",children:[(0,s.jsx)(n.h2,{id:"for-developers",children:"For Developers"}),(0,s.jsx)(n.p,{children:"Set up Google Drive integration for self-hosted instances."}),(0,s.jsx)(n.h3,{id:"environment-variables",children:"Environment Variables"}),(0,s.jsxs)(n.p,{children:["Add these to your ",(0,s.jsx)(n.code,{children:".env.local"}),":"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Google OAuth (server-side)\nGOOGLE_SERVER_CLIENT_ID=your-client-id.apps.googleusercontent.com\nGOOGLE_CLIENT_SECRET=your-client-secret\n\n# Google Picker (client-side)\nNEXT_PUBLIC_GOOGLE_CLIENT_ID=your-client-id.apps.googleusercontent.com\nNEXT_PUBLIC_GOOGLE_API_KEY=your-api-key\nNEXT_PUBLIC_GOOGLE_APP_ID=your-project-number\n"})}),(0,s.jsx)(n.h3,{id:"google-cloud-setup",children:"Google Cloud Setup"}),(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Create Project"})," at ",(0,s.jsx)(n.a,{href:"https://console.cloud.google.com",children:"console.cloud.google.com"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Enable APIs:"})," Google Drive API, Google Picker API"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Create OAuth 2.0 Client ID:"})," Application type: Web application. Authorized origins: ",(0,s.jsx)(n.code,{children:"http://localhost:3000"}),", ",(0,s.jsx)(n.code,{children:"https://yourdomain.com"}),". Authorized redirect URIs: ",(0,s.jsx)(n.code,{children:"http://localhost:3000/api/google-drive/oauth/callback"}),", ",(0,s.jsx)(n.code,{children:"https://yourdomain.com/api/google-drive/oauth/callback"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Create API Key:"})," Restrict to Google Picker API"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Get Project Number:"})," IAM & Admin \u2192 Settings \u2192 Project Number"]}),"\n"]}),(0,s.jsx)(n.h3,{id:"database-migration",children:"Database Migration"}),(0,s.jsx)(n.p,{children:"Run the OAuth tokens migration:"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:'-- 010_google_oauth.sql\nCREATE TABLE IF NOT EXISTS user_google_oauth (\n  user_id UUID PRIMARY KEY REFERENCES auth.users(id) ON DELETE CASCADE,\n  access_token TEXT NOT NULL,\n  refresh_token TEXT NOT NULL,\n  token_expiry TIMESTAMPTZ NOT NULL,\n  created_at TIMESTAMPTZ NOT NULL DEFAULT now(),\n  updated_at TIMESTAMPTZ NOT NULL DEFAULT now()\n);\n\nALTER TABLE user_google_oauth ENABLE ROW LEVEL SECURITY;\n\nCREATE POLICY "Users can view own oauth tokens"\n  ON user_google_oauth FOR SELECT\n  USING (user_id = auth.uid());\n\nCREATE POLICY "Users can insert own oauth tokens"\n  ON user_google_oauth FOR INSERT\n  WITH CHECK (user_id = auth.uid());\n\nCREATE POLICY "Users can update own oauth tokens"\n  ON user_google_oauth FOR UPDATE\n  USING (user_id = auth.uid())\n  WITH CHECK (user_id = auth.uid());\n\nCREATE POLICY "Users can delete own oauth tokens"\n  ON user_google_oauth FOR DELETE\n  USING (user_id = auth.uid());\n'})}),(0,s.jsx)(n.h3,{id:"api-routes",children:"API Routes"}),(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Endpoint"}),(0,s.jsx)(n.th,{children:"Method"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"/api/google-drive/oauth"})}),(0,s.jsx)(n.td,{children:"GET"}),(0,s.jsx)(n.td,{children:"Initiates OAuth flow"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"/api/google-drive/oauth/callback"})}),(0,s.jsx)(n.td,{children:"GET"}),(0,s.jsx)(n.td,{children:"Handles OAuth callback"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"/api/google-drive/token"})}),(0,s.jsx)(n.td,{children:"GET"}),(0,s.jsx)(n.td,{children:"Returns access token for authenticated user"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"/api/google-drive/status"})}),(0,s.jsx)(n.td,{children:"GET"}),(0,s.jsx)(n.td,{children:"Checks if user has valid OAuth tokens"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"/api/google-drive/contents/[folderId]"})}),(0,s.jsx)(n.td,{children:"GET"}),(0,s.jsx)(n.td,{children:"Lists folder contents"})]})]})]}),(0,s.jsx)(n.h3,{id:"oauth-flow",children:"OAuth Flow"}),(0,s.jsxs)(n.p,{children:['The flow works as follows: User clicks "Connect Google Drive", frontend redirects to ',(0,s.jsx)(n.code,{children:"/api/google-drive/oauth"}),", server redirects to Google consent screen, user authorizes, Google redirects to ",(0,s.jsx)(n.code,{children:"/api/google-drive/oauth/callback"}),", server exchanges code for tokens and stores in ",(0,s.jsx)(n.code,{children:"user_google_oauth"}),", user redirected back to app."]}),(0,s.jsx)(n.h3,{id:"scopes-used",children:"Scopes Used"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"const GOOGLE_OAUTH_SCOPES = [\n  'openid',\n  'email',\n  'https://www.googleapis.com/auth/drive.metadata.readonly',\n].join(' ')\n"})}),(0,s.jsx)(n.h3,{id:"google-workspace-considerations",children:"Google Workspace Considerations"}),(0,s.jsx)(n.p,{children:"When deploying for organizations using Google Workspace:"}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"OAuth Consent Screen:"}),' Consider publishing your OAuth consent screen (moving out of "Testing" mode). Testing mode limits to manually-added test users only. Production mode allows any Google account (subject to Workspace policies).']}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Workspace Admin Requirements:"})," Workspace admins need to approve your app. Provide them:"]}),(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Info"}),(0,s.jsx)(n.th,{children:"Where to Find"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Client ID"}),(0,s.jsx)(n.td,{children:"Google Cloud Console \u2192 Credentials \u2192 OAuth Client"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Required Scopes"}),(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.code,{children:"openid"}),", ",(0,s.jsx)(n.code,{children:"email"}),", ",(0,s.jsx)(n.code,{children:"drive.metadata.readonly"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"App Name"}),(0,s.jsx)(n.td,{children:"Your OAuth consent screen app name"})]})]})]}),(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Admin Console Path:"})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"admin.google.com \u2192 Security \u2192 Access and data control \u2192 API controls \u2192 App access control\n"})}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Important:"}),' The app won\'t appear in "Apps pending review" until a user from that Workspace actually attempts to OAuth. Have a test user connect first, THEN the admin can approve.']}),(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Common Workspace Issues:"})}),(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Symptom"}),(0,s.jsx)(n.th,{children:"Cause"}),(0,s.jsx)(n.th,{children:"Fix"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"invalid_client"})}),(0,s.jsx)(n.td,{children:"Env var has trailing newline"}),(0,s.jsxs)(n.td,{children:["Re-add env vars without ",(0,s.jsx)(n.code,{children:"\\n"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"403 on folder picker"}),(0,s.jsxs)(n.td,{children:["Workspace blocking ",(0,s.jsx)(n.code,{children:"drive.metadata.readonly"})," scope"]}),(0,s.jsx)(n.td,{children:"Admin must approve app with this scope"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"File picker works, folder picker doesn't"}),(0,s.jsx)(n.td,{children:"Different auth flows (client-side vs server-side)"}),(0,s.jsx)(n.td,{children:"Disconnect and reconnect to register scopes"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:'"App hasn\'t requested access yet" in Admin'}),(0,s.jsx)(n.td,{children:"OAuth hasn't been attempted"}),(0,s.jsx)(n.td,{children:"Have user connect first, then admin approves"})]})]})]}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Vercel Env Var Warning:"})," When adding env vars via CLI, ensure no trailing newlines:"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# WRONG - will break OAuth\necho "your-client-id" | vercel env add GOOGLE_SERVER_CLIENT_ID production\n\n# CORRECT - use -n flag\necho -n "your-client-id" | vercel env add GOOGLE_SERVER_CLIENT_ID production\n'})})]}),(0,s.jsxs)(l.A,{value:"agents",label:"Agents",children:[(0,s.jsx)(n.h2,{id:"for-agents",children:"For Agents"}),(0,s.jsx)(n.p,{children:"15-minute quickstart to get Google Drive working."}),(0,s.jsx)(n.h3,{id:"prerequisites",children:"Prerequisites"}),(0,s.jsx)(n.p,{children:"You need a Google Cloud account, a Supabase project with Headvroom schema, and Headvroom running locally or deployed."}),(0,s.jsx)(n.h3,{id:"quickstart-checklist",children:"Quickstart Checklist"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# 1. Create Google Cloud project (2 min)\n# Go to: console.cloud.google.com\n# Create new project, note the Project Number\n\n# 2. Enable APIs (1 min)\n# APIs & Services \u2192 Library \u2192 Enable:\n# - Google Drive API\n# - Google Picker API\n\n# 3. Create OAuth credentials (3 min)\n# APIs & Services \u2192 Credentials \u2192 Create Credentials \u2192 OAuth client ID\n# Type: Web application\n# Authorized origins: http://localhost:3000, https://your-domain.com\n# Authorized redirect URIs:\n#   http://localhost:3000/api/google-drive/oauth/callback\n#   https://your-domain.com/api/google-drive/oauth/callback\n# Note: Client ID, Client Secret\n\n# 4. Create API Key (1 min)\n# APIs & Services \u2192 Credentials \u2192 Create Credentials \u2192 API key\n# Restrict to: Google Picker API\n# Note: API Key\n\n# 5. Add env vars (2 min)\ncat >> .env.local << 'EOF'\nGOOGLE_SERVER_CLIENT_ID=your-client-id.apps.googleusercontent.com\nGOOGLE_CLIENT_SECRET=your-client-secret\nNEXT_PUBLIC_GOOGLE_CLIENT_ID=your-client-id.apps.googleusercontent.com\nNEXT_PUBLIC_GOOGLE_API_KEY=your-api-key\nNEXT_PUBLIC_GOOGLE_APP_ID=your-project-number\nEOF\n\n# 6. Run migration (2 min)\n# In Supabase SQL Editor, run:\n# supabase/migrations/010_google_oauth.sql\n\n# 7. Restart app (1 min)\nnpm run dev\n\n# 8. Test (3 min)\n# - Open any node\n# - Click \"Connect Google Drive\"\n# - Authorize with Google\n# - Select a folder\n# - Verify files appear\n"})}),(0,s.jsx)(n.h3,{id:"validation",children:"Validation"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# Check OAuth status\ncurl http://localhost:3000/api/google-drive/status \\\n  -H "Cookie: your-session-cookie"\n\n# Expected: { "connected": true } or { "connected": false }\n'})}),(0,s.jsx)(n.h3,{id:"common-issues",children:"Common Issues"}),(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Symptom"}),(0,s.jsx)(n.th,{children:"Fix"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:'"Not configured" message'}),(0,s.jsx)(n.td,{children:"Check all 5 env vars are set"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"OAuth fails"}),(0,s.jsx)(n.td,{children:"Verify redirect URIs match exactly"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Picker doesn't load"}),(0,s.jsx)(n.td,{children:"Check NEXT_PUBLIC_ vars are set"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Token expired"}),(0,s.jsx)(n.td,{children:"User needs to re-authorize"})]})]})]}),(0,s.jsx)(n.h3,{id:"google-workspace-quickstart-addendum",children:"Google Workspace Quickstart Addendum"}),(0,s.jsx)(n.p,{children:"If the target user has a Google Workspace account:"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# AFTER basic setup, if user gets 403/blocked errors:\n\n# 1. User must attempt OAuth first (will fail, that's ok)\n#    This registers the app with their Workspace\n\n# 2. Workspace admin goes to:\n#    admin.google.com \u2192 Security \u2192 API controls \u2192 App access control\n\n# 3. Admin adds app by OAuth Client ID:\n#    Your-Client-ID.apps.googleusercontent.com\n\n# 4. Admin approves these scopes:\n#    - openid\n#    - email\n#    - drive.metadata.readonly\n\n# 5. User disconnects Google Drive in Headvroom\n\n# 6. User reconnects - should work now\n"})}),(0,s.jsx)(n.h3,{id:"workspace-debugging",children:"Workspace Debugging"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# If folder picker fails but file picker works:\n# This indicates Workspace scope restrictions\n\n# The two pickers use different auth:\n# - FolderPickerButton: server-side OAuth (drive.metadata.readonly)\n# - DrivePickerButton: client-side GIS (drive.file)\n\n# Workspace may have approved drive.file but not drive.metadata.readonly\n# Solution: Admin must approve the full scope list, then user disconnect/reconnect\n"})}),(0,s.jsx)(n.h3,{id:"done",children:"Done?"}),(0,s.jsx)(n.p,{children:'User should now be able to click "Connect Google Drive" on any node, complete OAuth flow, select folders, and see folder contents in the node.'})]})]})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},1470:(e,n,r)=>{r.d(n,{A:()=>E});var o=r(6540),s=r(4164),t=r(7559),i=r(3104),l=r(6347),a=r(205),d=r(7485),c=r(1682),u=r(679);function h(e){return o.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,o.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function p(e){const{values:n,children:r}=e;return(0,o.useMemo)(()=>{const e=n??function(e){return h(e).map(({props:{value:e,label:n,attributes:r,default:o}})=>({value:e,label:n,attributes:r,default:o}))}(r);return function(e){const n=(0,c.XI)(e,(e,n)=>e.value===n.value);if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[n,r])}function g({value:e,tabValues:n}){return n.some(n=>n.value===e)}function x({queryString:e=!1,groupId:n}){const r=(0,l.W6)(),s=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,d.aZ)(s),(0,o.useCallback)(e=>{if(!s)return;const n=new URLSearchParams(r.location.search);n.set(s,e),r.replace({...r.location,search:n.toString()})},[s,r])]}function j(e){const{defaultValue:n,queryString:r=!1,groupId:s}=e,t=p(e),[i,l]=(0,o.useState)(()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!g({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const r=n.find(e=>e.default)??n[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:n,tabValues:t})),[d,c]=x({queryString:r,groupId:s}),[h,j]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[r,s]=(0,u.Dv)(n);return[r,(0,o.useCallback)(e=>{n&&s.set(e)},[n,s])]}({groupId:s}),m=(()=>{const e=d??h;return g({value:e,tabValues:t})?e:null})();(0,a.A)(()=>{m&&l(m)},[m]);return{selectedValue:i,selectValue:(0,o.useCallback)(e=>{if(!g({value:e,tabValues:t}))throw new Error(`Can't select invalid tab value=${e}`);l(e),c(e),j(e)},[c,j,t]),tabValues:t}}var m=r(2303);const v={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var f=r(4848);function b({className:e,block:n,selectedValue:r,selectValue:o,tabValues:t}){const l=[],{blockElementScrollPositionUntilNextRender:a}=(0,i.a_)(),d=e=>{const n=e.currentTarget,s=l.indexOf(n),i=t[s].value;i!==r&&(a(n),o(i))},c=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const r=l.indexOf(e.currentTarget)+1;n=l[r]??l[0];break}case"ArrowLeft":{const r=l.indexOf(e.currentTarget)-1;n=l[r]??l[l.length-1];break}}n?.focus()};return(0,f.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.A)("tabs",{"tabs--block":n},e),children:t.map(({value:e,label:n,attributes:o})=>(0,f.jsx)("li",{role:"tab",tabIndex:r===e?0:-1,"aria-selected":r===e,ref:e=>{l.push(e)},onKeyDown:c,onClick:d,...o,className:(0,s.A)("tabs__item",v.tabItem,o?.className,{"tabs__item--active":r===e}),children:n??e},e))})}function k({lazy:e,children:n,selectedValue:r}){const t=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=t.find(e=>e.props.value===r);return e?(0,o.cloneElement)(e,{className:(0,s.A)("margin-top--md",e.props.className)}):null}return(0,f.jsx)("div",{className:"margin-top--md",children:t.map((e,n)=>(0,o.cloneElement)(e,{key:n,hidden:e.props.value!==r}))})}function A(e){const n=j(e);return(0,f.jsxs)("div",{className:(0,s.A)(t.G.tabs.container,"tabs-container",v.tabList),children:[(0,f.jsx)(b,{...n,...e}),(0,f.jsx)(k,{...n,...e})]})}function E(e){const n=(0,m.A)();return(0,f.jsx)(A,{...e,children:h(e.children)},String(n))}},8453:(e,n,r)=>{r.d(n,{R:()=>i,x:()=>l});var o=r(6540);const s={},t=o.createContext(s);function i(e){const n=o.useContext(t);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),o.createElement(t.Provider,{value:n},e.children)}},9365:(e,n,r)=>{r.d(n,{A:()=>i});r(6540);var o=r(4164);const s={tabItem:"tabItem_Ymn6"};var t=r(4848);function i({children:e,hidden:n,className:r}){return(0,t.jsx)("div",{role:"tabpanel",className:(0,o.A)(s.tabItem,r),hidden:n,children:e})}}}]);
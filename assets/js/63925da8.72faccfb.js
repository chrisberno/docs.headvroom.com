"use strict";(globalThis.webpackChunkdocs_headvroom_com=globalThis.webpackChunkdocs_headvroom_com||[]).push([[871],{8230:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>t,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"developers/index","title":"Developers Guide","description":"Technical documentation for self-hosting, integrating, and extending Headvroom.","source":"@site/docs/developers/index.md","sourceDirName":"developers","slug":"/developers/","permalink":"/developers/","draft":false,"unlisted":false,"editUrl":"https://github.com/chrisberno/headvroom/tree/main/docs/docs.headvroom.com/docs/developers/index.md","tags":[],"version":"current","sidebarPosition":11,"frontMatter":{"sidebar_label":"Developers Guide","sidebar_position":11},"sidebar":"docsSidebar","previous":{"title":"Users Guide","permalink":"/users/"},"next":{"title":"Agents Guide","permalink":"/agents/"}}');var d=s(4848),l=s(8453);const r={sidebar_label:"Developers Guide",sidebar_position:11},t="Developers Guide",o={},c=[{value:"Tech Stack",id:"tech-stack",level:2},{value:"Self-Hosting",id:"self-hosting",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Quick Setup",id:"quick-setup",level:3},{value:"Environment Variables",id:"environment-variables",level:3},{value:"Database Schema",id:"database-schema",level:2},{value:"Tables",id:"tables",level:3},{value:"Row Level Security",id:"row-level-security",level:3},{value:"API Routes",id:"api-routes",level:2},{value:"Graph",id:"graph",level:3},{value:"Nodes",id:"nodes",level:3},{value:"Edges",id:"edges",level:3},{value:"Settings",id:"settings",level:3},{value:"Embed",id:"embed",level:3},{value:"Google Drive",id:"google-drive",level:3},{value:"Deployment",id:"deployment",level:2},{value:"Vercel (Recommended)",id:"vercel-recommended",level:3},{value:"Other Platforms",id:"other-platforms",level:3},{value:"Extending",id:"extending",level:2},{value:"Adding New Media Types",id:"adding-new-media-types",level:3},{value:"Adding New Layouts",id:"adding-new-layouts",level:3}];function a(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.header,{children:(0,d.jsx)(n.h1,{id:"developers-guide",children:"Developers Guide"})}),"\n",(0,d.jsx)(n.p,{children:"Technical documentation for self-hosting, integrating, and extending Headvroom."}),"\n",(0,d.jsx)(n.h2,{id:"tech-stack",children:"Tech Stack"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Frontend"}),": Next.js 16 (App Router), React 19, TypeScript"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Styling"}),": Tailwind CSS"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Graph"}),": @xyflow/react (React Flow)"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"State"}),": Zustand"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Database"}),": Supabase (PostgreSQL)"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Auth"}),": Supabase Magic Link"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Storage"}),": Supabase Storage"]}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"self-hosting",children:"Self-Hosting"}),"\n",(0,d.jsx)(n.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"Node.js 20.9+"}),"\n",(0,d.jsx)(n.li,{children:"npm 9+"}),"\n",(0,d.jsx)(n.li,{children:"Supabase account (free tier works)"}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"quick-setup",children:"Quick Setup"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"# Clone repository\ngit clone https://github.com/chrisberno/headvroom.git\ncd headvroom\n\n# Install dependencies\nnpm install\n\n# Configure environment\ncp .env.example .env.local\n# Edit .env.local with your Supabase credentials\n\n# Run migrations in Supabase SQL Editor\n# Files: supabase/migrations/*.sql\n\n# Start development server\nnpm run dev\n"})}),"\n",(0,d.jsx)(n.h3,{id:"environment-variables",children:"Environment Variables"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"# Required\nNEXT_PUBLIC_SUPABASE_URL=https://xxxxx.supabase.co\nNEXT_PUBLIC_SUPABASE_ANON_KEY=eyJ...\n\n# For embed feature\nSUPABASE_SERVICE_ROLE_KEY=eyJ...\n\n# For Google Drive (optional)\nGOOGLE_SERVER_CLIENT_ID=...\nGOOGLE_CLIENT_SECRET=...\nNEXT_PUBLIC_GOOGLE_CLIENT_ID=...\nNEXT_PUBLIC_GOOGLE_API_KEY=...\nNEXT_PUBLIC_GOOGLE_APP_ID=...\n"})}),"\n",(0,d.jsx)(n.h2,{id:"database-schema",children:"Database Schema"}),"\n",(0,d.jsx)(n.h3,{id:"tables",children:"Tables"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Table"}),(0,d.jsx)(n.th,{children:"Purpose"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"nodes"})}),(0,d.jsx)(n.td,{children:"Graph nodes with JSONB content"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"edges"})}),(0,d.jsx)(n.td,{children:"Connections between nodes"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"user_settings"})}),(0,d.jsx)(n.td,{children:"Layout, theme preferences"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"user_google_oauth"})}),(0,d.jsx)(n.td,{children:"OAuth tokens for Drive"})]})]})]}),"\n",(0,d.jsx)(n.h3,{id:"row-level-security",children:"Row Level Security"}),"\n",(0,d.jsxs)(n.p,{children:["All tables enforce RLS: ",(0,d.jsx)(n.code,{children:"user_id = auth.uid()"})]}),"\n",(0,d.jsx)(n.h2,{id:"api-routes",children:"API Routes"}),"\n",(0,d.jsx)(n.h3,{id:"graph",children:"Graph"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"GET /api/graph"})," - All nodes/edges for user"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"GET /api/graph/expand/[nodeId]"})," - Node + connected nodes/edges"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"nodes",children:"Nodes"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"POST /api/nodes"})," - Create node"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"PATCH /api/nodes"})," - Update node"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"DELETE /api/nodes?nodeId="})," - Delete node"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"edges",children:"Edges"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"POST /api/edges"})," - Create edge"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"DELETE /api/edges?edgeId="})," - Delete edge"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"settings",children:"Settings"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"GET /api/settings"})," - Get user preferences"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"POST /api/settings"})," - Update preferences"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"embed",children:"Embed"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"GET /api/embed/[nodeId]?shareToken="})," - Public embed data"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"google-drive",children:"Google Drive"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"GET /api/google-drive/oauth"})," - Start OAuth flow"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"GET /api/google-drive/status"})," - Check connection status"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"GET /api/google-drive/contents/[folderId]"})," - List folder"]}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"deployment",children:"Deployment"}),"\n",(0,d.jsx)(n.h3,{id:"vercel-recommended",children:"Vercel (Recommended)"}),"\n",(0,d.jsxs)(n.ol,{children:["\n",(0,d.jsx)(n.li,{children:"Push to GitHub"}),"\n",(0,d.jsx)(n.li,{children:"Import in Vercel"}),"\n",(0,d.jsx)(n.li,{children:"Add environment variables"}),"\n",(0,d.jsx)(n.li,{children:"Deploy"}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"other-platforms",children:"Other Platforms"}),"\n",(0,d.jsx)(n.p,{children:"Any Node.js hosting works. Set:"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.code,{children:"NODE_ENV=production"})}),"\n",(0,d.jsx)(n.li,{children:"All environment variables"}),"\n",(0,d.jsxs)(n.li,{children:["Build: ",(0,d.jsx)(n.code,{children:"npm run build"})]}),"\n",(0,d.jsxs)(n.li,{children:["Start: ",(0,d.jsx)(n.code,{children:"npm start"})]}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"extending",children:"Extending"}),"\n",(0,d.jsx)(n.h3,{id:"adding-new-media-types",children:"Adding New Media Types"}),"\n",(0,d.jsxs)(n.ol,{children:["\n",(0,d.jsxs)(n.li,{children:["Add type to ",(0,d.jsx)(n.code,{children:"types/graph.ts"})]}),"\n",(0,d.jsxs)(n.li,{children:["Create component in ",(0,d.jsx)(n.code,{children:"components/panels/"})]}),"\n",(0,d.jsxs)(n.li,{children:["Add tab in ",(0,d.jsx)(n.code,{children:"MediaSection.tsx"})]}),"\n",(0,d.jsx)(n.li,{children:"Update node content schema"}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"adding-new-layouts",children:"Adding New Layouts"}),"\n",(0,d.jsxs)(n.ol,{children:["\n",(0,d.jsxs)(n.li,{children:["Add algorithm to ",(0,d.jsx)(n.code,{children:"lib/graph-utils.ts"})]}),"\n",(0,d.jsxs)(n.li,{children:["Add to ",(0,d.jsx)(n.code,{children:"LayoutAlgorithm"})," type"]}),"\n",(0,d.jsx)(n.li,{children:"Add to layout dropdown in toolbar"}),"\n",(0,d.jsx)(n.li,{children:"Test with various graph sizes"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(a,{...e})}):a(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>t});var i=s(6540);const d={},l=i.createContext(d);function r(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:r(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);
"use strict";(globalThis.webpackChunkdocs_headvroom_com=globalThis.webpackChunkdocs_headvroom_com||[]).push([[313],{5734:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"deployment-guide","title":"Deployment Guide","description":"Standard operating procedures for docs.headvroom.com deployment and maintenance.","source":"@site/docs/deployment-guide.md","sourceDirName":".","slug":"/deployment-guide","permalink":"/deployment-guide","draft":false,"unlisted":false,"editUrl":"https://github.com/chrisberno/headvroom/tree/main/docs/docs.headvroom.com/docs/deployment-guide.md","tags":[],"version":"current","sidebarPosition":20,"frontMatter":{"sidebar_label":"Deployment Guide","sidebar_position":20},"sidebar":"docsSidebar","previous":{"title":"Agents Guide","permalink":"/agents/"}}');var r=i(4848),o=i(8453);const t={sidebar_label:"Deployment Guide",sidebar_position:20},d="Deployment Guide",l={},c=[{value:"Architecture Overview",id:"architecture-overview",level:2},{value:"Repository",id:"repository",level:2},{value:"Deployment Protocol",id:"deployment-protocol",level:2},{value:"Standard Deployment (Automatic)",id:"standard-deployment-automatic",level:3},{value:"Pre-Push Verification (Required)",id:"pre-push-verification-required",level:3},{value:"Manual Deployment (Emergency Only)",id:"manual-deployment-emergency-only",level:3},{value:"CI/CD Pipeline",id:"cicd-pipeline",level:2},{value:"Workflow Trigger",id:"workflow-trigger",level:3},{value:"Pipeline Steps",id:"pipeline-steps",level:3},{value:"Monitoring Deployments",id:"monitoring-deployments",level:3},{value:"DNS Configuration",id:"dns-configuration",level:2},{value:"Required DNS Record",id:"required-dns-record",level:3},{value:"Verify DNS",id:"verify-dns",level:3},{value:"GitHub Pages Settings",id:"github-pages-settings",level:3},{value:"File Structure",id:"file-structure",level:2},{value:"Content Standards",id:"content-standards",level:2},{value:"Three-Path Documentation Pattern",id:"three-path-documentation-pattern",level:3},{value:"Commit Message Format",id:"commit-message-format",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Build Fails Locally",id:"build-fails-locally",level:3},{value:"GitHub Actions Fails",id:"github-actions-fails",level:3},{value:"Site Shows 404",id:"site-shows-404",level:3},{value:"Custom Domain Not Working",id:"custom-domain-not-working",level:3},{value:"Quality Checklist",id:"quality-checklist",level:2},{value:"Agent Handoff Protocol",id:"agent-handoff-protocol",level:2},{value:"Version History",id:"version-history",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"deployment-guide",children:"Deployment Guide"})}),"\n",(0,r.jsx)(n.p,{children:"Standard operating procedures for docs.headvroom.com deployment and maintenance."}),"\n",(0,r.jsx)(n.h2,{id:"architecture-overview",children:"Architecture Overview"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Component"}),(0,r.jsx)(n.th,{children:"Technology"}),(0,r.jsx)(n.th,{children:"Location"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Source"}),(0,r.jsx)(n.td,{children:"Docusaurus 3.x + TypeScript"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"main"})," branch"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Build"}),(0,r.jsx)(n.td,{children:"GitHub Actions"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:".github/workflows/deploy.yml"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Hosting"}),(0,r.jsx)(n.td,{children:"GitHub Pages"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"gh-pages"})," branch"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Domain"}),(0,r.jsx)(n.td,{children:"Custom CNAME"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"docs.headvroom.com"})})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"repository",children:"Repository"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"GitHub"}),": ",(0,r.jsx)(n.a,{href:"https://github.com/chrisberno/docs.headvroom.com",children:"https://github.com/chrisberno/docs.headvroom.com"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Live Site"}),": ",(0,r.jsx)(n.a,{href:"https://docs.headvroom.com",children:"https://docs.headvroom.com"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Fallback URL"}),": ",(0,r.jsx)(n.a,{href:"https://chrisberno.github.io/docs.headvroom.com/",children:"https://chrisberno.github.io/docs.headvroom.com/"})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"deployment-protocol",children:"Deployment Protocol"}),"\n",(0,r.jsx)(n.h3,{id:"standard-deployment-automatic",children:"Standard Deployment (Automatic)"}),"\n",(0,r.jsxs)(n.p,{children:["Push to ",(0,r.jsx)(n.code,{children:"main"})," triggers automatic deployment:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# 1. Make changes to docs\n# 2. Commit with clear message\ngit add .\ngit commit -m "Add feature X documentation"\n\n# 3. Push to main\ngit push origin main\n\n# 4. Verify deployment (wait ~60 seconds)\ngh api repos/chrisberno/docs.headvroom.com/actions/runs \\\n  --jq \'.workflow_runs[0] | {status: .status, conclusion: .conclusion}\'\n\n# Expected: {"status":"completed","conclusion":"success"}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"pre-push-verification-required",children:"Pre-Push Verification (Required)"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Always verify before pushing:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Build must succeed\nnpm run build\n\n# No errors allowed. Warnings are acceptable but should be addressed.\n"})}),"\n",(0,r.jsx)(n.h3,{id:"manual-deployment-emergency-only",children:"Manual Deployment (Emergency Only)"}),"\n",(0,r.jsx)(n.p,{children:"If GitHub Actions fails, deploy manually:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# 1. Build locally\nnpm run build\n\n# 2. Deploy using Docusaurus\nGIT_USER=chrisberno npm run deploy\n"})}),"\n",(0,r.jsx)(n.h2,{id:"cicd-pipeline",children:"CI/CD Pipeline"}),"\n",(0,r.jsx)(n.h3,{id:"workflow-trigger",children:"Workflow Trigger"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"on:\n  push:\n    branches: [main]\n  pull_request:\n    branches: [main]\n"})}),"\n",(0,r.jsx)(n.h3,{id:"pipeline-steps",children:"Pipeline Steps"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Checkout"})," - Full history for proper builds"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Setup Node 20"})," - With npm cache"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Install"})," - ",(0,r.jsx)(n.code,{children:"npm ci"})," for reproducible builds"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Build"})," - ",(0,r.jsx)(n.code,{children:"npm run build"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Deploy"})," - Push to ",(0,r.jsx)(n.code,{children:"gh-pages"})," branch (main only)"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"monitoring-deployments",children:"Monitoring Deployments"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Check latest workflow run\ngh api repos/chrisberno/docs.headvroom.com/actions/runs \\\n  --jq '.workflow_runs[0] | {status, conclusion, created_at, html_url}'\n\n# View workflow logs (if failed)\ngh run view --repo chrisberno/docs.headvroom.com\n"})}),"\n",(0,r.jsx)(n.h2,{id:"dns-configuration",children:"DNS Configuration"}),"\n",(0,r.jsx)(n.h3,{id:"required-dns-record",children:"Required DNS Record"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Type:  CNAME\nHost:  docs\nValue: chrisberno.github.io\nTTL:   3600 (or default)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"verify-dns",children:"Verify DNS"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Check CNAME resolution\ndig docs.headvroom.com CNAME +short\n# Expected: chrisberno.github.io.\n\n# Check site accessibility\ncurl -sI https://docs.headvroom.com | head -3\n# Expected: HTTP/2 200\n"})}),"\n",(0,r.jsx)(n.h3,{id:"github-pages-settings",children:"GitHub Pages Settings"}),"\n",(0,r.jsx)(n.p,{children:"Configured via API, persisted in repo:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Source"}),": ",(0,r.jsx)(n.code,{children:"gh-pages"})," branch, root (",(0,r.jsx)(n.code,{children:"/"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Custom domain"}),": ",(0,r.jsx)(n.code,{children:"docs.headvroom.com"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"HTTPS"}),": Enforced (after DNS propagation)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CNAME file"}),": ",(0,r.jsx)(n.code,{children:"static/CNAME"})," (auto-copied to build)"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"file-structure",children:"File Structure"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"docs.headvroom.com/\n\u251c\u2500\u2500 .github/workflows/deploy.yml  # CI/CD pipeline\n\u251c\u2500\u2500 docs/                         # Documentation source\n\u2502   \u251c\u2500\u2500 index.md                  # Welcome page\n\u2502   \u251c\u2500\u2500 getting-started.md\n\u2502   \u251c\u2500\u2500 features/\n\u2502   \u2502   \u251c\u2500\u2500 integrations/\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 google-drive.md\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 media-images.md\n\u2502   \u2502   \u2514\u2500\u2500 ...\n\u2502   \u251c\u2500\u2500 users/index.md\n\u2502   \u251c\u2500\u2500 developers/index.md\n\u2502   \u2514\u2500\u2500 agents/index.md\n\u251c\u2500\u2500 static/\n\u2502   \u251c\u2500\u2500 CNAME                     # Custom domain config\n\u2502   \u2514\u2500\u2500 img/                      # Images and assets\n\u251c\u2500\u2500 src/\n\u2502   \u2514\u2500\u2500 css/custom.css            # Theme customizations\n\u251c\u2500\u2500 docusaurus.config.ts          # Site configuration\n\u251c\u2500\u2500 sidebars.ts                   # Navigation structure\n\u2514\u2500\u2500 package.json\n"})}),"\n",(0,r.jsx)(n.h2,{id:"content-standards",children:"Content Standards"}),"\n",(0,r.jsx)(n.h3,{id:"three-path-documentation-pattern",children:"Three-Path Documentation Pattern"}),"\n",(0,r.jsx)(n.p,{children:"All feature documentation must include content for three audiences:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mdx",children:'import Tabs from \'@theme/Tabs\';\nimport TabItem from \'@theme/TabItem\';\n\n<Tabs>\n<TabItem value="users" label="Users" default>\n## For Users\n[End-user focused content]\n</TabItem>\n<TabItem value="developers" label="Developers">\n## For Developers\n[Technical implementation details]\n</TabItem>\n<TabItem value="agents" label="Agents">\n## For Agents\n[Quick setup, validation checklists, troubleshooting tables]\n</TabItem>\n</Tabs>\n'})}),"\n",(0,r.jsx)(n.h3,{id:"commit-message-format",children:"Commit Message Format"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"[Action] [Component]: Brief description\n\nExamples:\n- Add Google Drive integration documentation\n- Update getting-started with new screenshots\n- Fix broken link in developers guide\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Do NOT include:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"AI/LLM attribution in commits"}),"\n",(0,r.jsx)(n.li,{children:"Emoji in commit messages"}),"\n",(0,r.jsx)(n.li,{children:"Co-authored-by lines referencing AI"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,r.jsx)(n.h3,{id:"build-fails-locally",children:"Build Fails Locally"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Clear cache and rebuild\nnpm run clear\nnpm run build\n\n# Check for TypeScript errors\nnpx tsc --noEmit\n"})}),"\n",(0,r.jsx)(n.h3,{id:"github-actions-fails",children:"GitHub Actions Fails"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Symptom"}),(0,r.jsx)(n.th,{children:"Cause"}),(0,r.jsx)(n.th,{children:"Fix"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"npm ci"})," fails"]}),(0,r.jsx)(n.td,{children:"Lock file mismatch"}),(0,r.jsxs)(n.td,{children:["Run ",(0,r.jsx)(n.code,{children:"npm install"})," locally, commit ",(0,r.jsx)(n.code,{children:"package-lock.json"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Build fails"}),(0,r.jsx)(n.td,{children:"MDX syntax error"}),(0,r.jsx)(n.td,{children:"Check for unclosed tags, invalid JSX"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Deploy fails"}),(0,r.jsx)(n.td,{children:"Permission issue"}),(0,r.jsx)(n.td,{children:"Check repo settings \u2192 Actions \u2192 Workflow permissions"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"site-shows-404",children:"Site Shows 404"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Verify gh-pages branch exists\ngit ls-remote --heads origin gh-pages\n\n# Verify Pages is enabled\ngh api repos/chrisberno/docs.headvroom.com/pages\n\n# Check if build output exists\ngh api repos/chrisberno/docs.headvroom.com/contents?ref=gh-pages \\\n  --jq '.[].name' | head -5\n"})}),"\n",(0,r.jsx)(n.h3,{id:"custom-domain-not-working",children:"Custom Domain Not Working"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# 1. Verify CNAME in gh-pages branch\ngh api repos/chrisberno/docs.headvroom.com/contents/CNAME?ref=gh-pages \\\n  --jq \'.content\' | base64 -d\n\n# 2. Verify DNS propagation\ndig docs.headvroom.com CNAME +short\n\n# 3. Re-enable custom domain if needed\ngh api repos/chrisberno/docs.headvroom.com/pages -X PUT --input - <<EOF\n{\n  "cname": "docs.headvroom.com",\n  "build_type": "legacy",\n  "source": {"branch": "gh-pages", "path": "/"}\n}\nEOF\n'})}),"\n",(0,r.jsx)(n.h2,{id:"quality-checklist",children:"Quality Checklist"}),"\n",(0,r.jsx)(n.p,{children:"Before any deployment, verify:"}),"\n",(0,r.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(n.code,{children:"npm run build"})," succeeds with no errors"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","All new pages have proper frontmatter (",(0,r.jsx)(n.code,{children:"sidebar_label"}),", ",(0,r.jsx)(n.code,{children:"sidebar_position"}),")"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Feature docs use three-path tab pattern"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Images are in ",(0,r.jsx)(n.code,{children:"static/img/"})," with descriptive names"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Internal links use relative paths (e.g., ",(0,r.jsx)(n.code,{children:"/getting-started"}),")"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","No broken links (check build warnings)"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Sidebar navigation updated in ",(0,r.jsx)(n.code,{children:"sidebars.ts"})," if new pages added"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"agent-handoff-protocol",children:"Agent Handoff Protocol"}),"\n",(0,r.jsx)(n.p,{children:"When a CDO or agent completes documentation work:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Verify build"}),": ",(0,r.jsx)(n.code,{children:"npm run build"})," must succeed"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Push to main"}),": Commit with clear message"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Confirm deployment"}),": Check workflow status"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Document changes"}),": Update this guide if procedures change"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Mirror to Google Drive"}),": If required by CEO (see CDO agent definition)"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"version-history",children:"Version History"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Date"}),(0,r.jsx)(n.th,{children:"Change"}),(0,r.jsx)(n.th,{children:"Author"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"2024-11-28"}),(0,r.jsx)(n.td,{children:"Initial deployment guide"}),(0,r.jsx)(n.td,{children:"CDO"})]})})]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>d});var s=i(6540);const r={},o=s.createContext(r);function t(e){const n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);